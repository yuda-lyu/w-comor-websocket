/*!
 * ws-client v1.0.23
 * (c) 2018-2019 yuda-lyu(semisphere)
 * Released under the MIT License.
 */(function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n(require("ws")):"function"==typeof define&&define.amd?define(["ws"],n):(e=e||self,e["ws-client"]=n(e.ws))})(this,function(e){'use strict';function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function t(){return"undefined"==typeof self?"undefined"==typeof window?"undefined"==typeof global?null:global:window:self}function o(){var e="undefined"!=typeof window&&"undefined"!=typeof window.document,n="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,t="undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node;e=e||n;var o={isBrowser:e,isWebWorker:n,isNode:t};return o}function r(e){var n=Object.prototype.toString.call(e);return"[object Function]"===n||"[object AsyncFunction]"===n}function s(n){function s(){r(n.open)&&n.open()}function i(){r(n.close)&&n.close()}function d(e){r(n.message)&&n.message(e)}function a(e){r(n.error)&&n.error(e),l.close()}var l=null;n.url||(n.url="ws://localhost:8080"),n.token||(n.token="*");var u,c=o().isBrowser;u=c?t().WebSocket:e;try{l=new u(n.url+"/?token="+n.token)}catch(e){l=null}return null===l?{error:"can not new MixWS"}:(c?(l.onopen=s,l.onmessage=function(e){var n=e.data;d(n)},l.onclose=i,l.onerror=a):(l.on("open",s),l.on("message",d),l.on("close",i),l.on("error",a)),l)}function i(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":X&&X in Object(e)?K(e):D(e)}function d(e){return null!=e&&"object"==n(e)}function a(e){return"symbol"==n(e)||Z(e)&&Y(e)=="[object Symbol]"}function l(e,t){if(F(e))return!1;var o=n(e);return!!("number"==o||"symbol"==o||"boolean"==o||null==e||q(e))||ee.test(e)||!J.test(e)||null!=t&&e in Object(t)}function u(e){var t=n(e);return null!=e&&("object"==t||"function"==t)}function c(e){return!!se&&se in e}function p(e){var n=-1,t=null==e?0:e.length;for(this.clear();++n<t;){var o=e[n];this.set(o[0],o[1])}}function f(e){var n=-1,t=null==e?0:e.length;for(this.clear();++n<t;){var o=e[n];this.set(o[0],o[1])}}function y(e){var t=n(e);return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function _(e){var n=-1,t=null==e?0:e.length;for(this.clear();++n<t;){var o=e[n];this.set(o[0],o[1])}}function g(e,n){if("function"!=typeof e||null!=n&&"function"!=typeof n)throw new TypeError("Expected a function");var t=function t(){var o=arguments,r=n?n.apply(this,o):o[0],s=t.cache;if(s.has(r))return s.get(r);var i=e.apply(this,o);return t.cache=s.set(r,i)||s,i};return t.cache=new(g.Cache||Ae),t}function h(e){if("string"==typeof e)return e;if(F(e))return Ne(e,h)+"";if(q(e))return $e?$e.call(e):"";var n=e+"";return"0"==n&&1/e==-We?"-0":n}function m(e,n,t){var o=e[n];Xe.call(e,n)&&Se(o,t)&&(t!==void 0||n in e)||Qe(e,n,t)}function b(e,t){var o=n(e);return t=null==t?9007199254740991:t,!!t&&("number"==o||"symbol"!=o&&Ye.test(e))&&-1<e&&0==e%1&&e<t}function v(){var e,n,t=new Promise(function(){e=arguments[0],n=arguments[1]});return t.resolve=e,t.reject=n,t}function k(e){var n=Object.prototype.toString.call(e);return"[object String]"===n}function O(e){return!!(k(e)&&""!==e)}function j(e){var n=Object.prototype.toString.call(e);return"[object Number]"===n}function L(e){var n=!1;return O(e)?n=!isNaN(+e):j(e)&&(n=!0),n}function w(e){if(!L(e))return 0;var n=an(e);return n}function S(e){return!!L(e)&&(e=w(e),un(e))}function E(e){if(!L(e))return 0;e=w(e);var n=yn(e);return"0"===n+""?0:n}function x(e){if(!S(e))return!1;var n=0<E(e);return n}function P(){var e,n=0<arguments.length&&arguments[0]!==void 0?arguments[0]:32,t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],o=[],s=t.length;if(x(n))for(e=0;e<n;e++)o[e]=t[0|Math.random()*s];else if("rfc4122"===n){o[8]=o[13]=o[18]=o[23]="-",o[14]="4";var d;for(e=0;36>e;e++)o[e]||(d=0|16*Math.random(),o[e]=t[19===e?8|3&d:d])}else return"";var a=o.join("");return a}function z(e){if(!O(e))return{};var n={};try{n=JSON.parse(e)}catch(e){n={}}return n}e=e&&e.hasOwnProperty("default")?e["default"]:e;var T="undefined"==typeof globalThis?"undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?{}:self:global:window:globalThis,A=function(e,n){return n={exports:{}},e(n,n.exports),n.exports}(function(e){(function(t){function o(){}function r(e,n){for(var t=e.length;t--;)if(e[t].listener===n)return t;return-1}function s(e){return function(){return this[e].apply(this,arguments)}}function i(e){return!!("function"==typeof e||e instanceof RegExp)||!!(e&&"object"===n(e))&&i(e.listener)}var d=o.prototype,a=t.EventEmitter;d.getListeners=function(e){var n,t,o=this._getEvents();if(e instanceof RegExp)for(t in n={},o)o.hasOwnProperty(t)&&e.test(t)&&(n[t]=o[t]);else n=o[e]||(o[e]=[]);return n},d.flattenListeners=function(e){var n,t=[];for(n=0;n<e.length;n+=1)t.push(e[n].listener);return t},d.getListenersAsObject=function(e){var n,t=this.getListeners(e);return t instanceof Array&&(n={},n[e]=t),n||t},d.addListener=function(e,t){if(!i(t))throw new TypeError("listener must be a function");var o,s=this.getListenersAsObject(e),d="object"===n(t);for(o in s)s.hasOwnProperty(o)&&-1===r(s[o],t)&&s[o].push(d?t:{listener:t,once:!1});return this},d.on=s("addListener"),d.addOnceListener=function(e,n){return this.addListener(e,{listener:n,once:!0})},d.once=s("addOnceListener"),d.defineEvent=function(e){return this.getListeners(e),this},d.defineEvents=function(e){for(var n=0;n<e.length;n+=1)this.defineEvent(e[n]);return this},d.removeListener=function(e,n){var t,o,s=this.getListenersAsObject(e);for(o in s)s.hasOwnProperty(o)&&(t=r(s[o],n),-1!==t&&s[o].splice(t,1));return this},d.off=s("removeListener"),d.addListeners=function(e,n){return this.manipulateListeners(!1,e,n)},d.removeListeners=function(e,n){return this.manipulateListeners(!0,e,n)},d.manipulateListeners=function(e,t,o){var r,s,d=e?this.removeListener:this.addListener,a=e?this.removeListeners:this.addListeners;if("object"===n(t)&&!(t instanceof RegExp))for(r in t)t.hasOwnProperty(r)&&(s=t[r])&&("function"==typeof s?d.call(this,r,s):a.call(this,r,s));else for(r=o.length;r--;)d.call(this,t,o[r]);return this},d.removeEvent=function(e){var t,o=n(e),r=this._getEvents();if("string"===o)delete r[e];else if(e instanceof RegExp)for(t in r)r.hasOwnProperty(t)&&e.test(t)&&delete r[t];else delete this._events;return this},d.removeAllListeners=s("removeEvent"),d.emitEvent=function(e,n){var t,o,r,s,d,a=this.getListenersAsObject(e);for(s in a)if(a.hasOwnProperty(s))for(t=a[s].slice(0),r=0;r<t.length;r++)o=t[r],!0===o.once&&this.removeListener(e,o.listener),d=o.listener.apply(this,n||[]),d===this._getOnceReturnValue()&&this.removeListener(e,o.listener);return this},d.trigger=s("emitEvent"),d.emit=function(e){var n=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,n)},d.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},d._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},d._getEvents=function(){return this._events||(this._events={})},o.noConflict=function(){return t.EventEmitter=a,o},e.exports?e.exports=o:t.EventEmitter=o})("undefined"==typeof window?T||{}:window)}),R=Array.isArray,F=R,V="object"==n(T)&&T&&T.Object===Object&&T,N="object"==("undefined"==typeof self?"undefined":n(self))&&self&&self.Object===Object&&self,W=V||N||Function("return this")(),C=W,$=C.Symbol,M=$,B=Object.prototype,U=B.hasOwnProperty,I=B.toString,G=M?M.toStringTag:void 0,K=function(e){var n=U.call(e,G),t=e[G];try{e[G]=void 0;var o=!0}catch(n){}var r=I.call(e);return o&&(n?e[G]=t:delete e[G]),r},H=Object.prototype,Q=H.toString,D=function(e){return Q.call(e)},X=M?M.toStringTag:void 0,Y=i,Z=d,q=a,J=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ee=/^\w*$/,ne=u,te=function(e){if(!ne(e))return!1;var n=Y(e);return n=="[object Function]"||n=="[object GeneratorFunction]"||n=="[object AsyncFunction]"||n=="[object Proxy]"},oe=C["__core-js_shared__"],re=oe,se=function(){var e=/[^.]+$/.exec(re&&re.keys&&re.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),ie=Function.prototype,de=ie.toString,ae=function(e){if(null!=e){try{return de.call(e)}catch(n){}try{return e+""}catch(n){}}return""},le=/[\\^$.*+?()[\]{}|]/g,ue=/^\[object .+?Constructor\]$/,ce=Function.prototype,pe=Object.prototype,fe=ce.toString,ye=pe.hasOwnProperty,_e=RegExp("^"+fe.call(ye).replace(le,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ge=function(e){if(!ne(e)||c(e))return!1;var n=te(e)?_e:ue;return n.test(ae(e))},he=function(e,n){return null==e?void 0:e[n]},me=function(e,n){var t=he(e,n);return ge(t)?t:void 0},be=me(Object,"create"),ve=be,ke=Object.prototype,Oe=ke.hasOwnProperty,je=Object.prototype,Le=je.hasOwnProperty;p.prototype.clear=function(){this.__data__=ve?ve(null):{},this.size=0},p.prototype["delete"]=function(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n},p.prototype.get=function(e){var n=this.__data__;if(ve){var t=n[e];return t==="__lodash_hash_undefined__"?void 0:t}return Oe.call(n,e)?n[e]:void 0},p.prototype.has=function(e){var n=this.__data__;return ve?n[e]!==void 0:Le.call(n,e)},p.prototype.set=function(e,n){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=ve&&void 0===n?"__lodash_hash_undefined__":n,this};var we=p,Se=function(e,n){return e===n||e!==e&&n!==n},Ee=function(e,n){for(var t=e.length;t--;)if(Se(e[t][0],n))return t;return-1},xe=Array.prototype,Pe=xe.splice;f.prototype.clear=function(){this.__data__=[],this.size=0},f.prototype["delete"]=function(e){var n=this.__data__,t=Ee(n,e);if(0>t)return!1;var o=n.length-1;return t==o?n.pop():Pe.call(n,t,1),--this.size,!0},f.prototype.get=function(e){var n=this.__data__,t=Ee(n,e);return 0>t?void 0:n[t][1]},f.prototype.has=function(e){return-1<Ee(this.__data__,e)},f.prototype.set=function(e,n){var t=this.__data__,o=Ee(t,e);return 0>o?(++this.size,t.push([e,n])):t[o][1]=n,this};var ze=me(C,"Map"),Te=function(e,n){var t=e.__data__;return y(n)?t["string"==typeof n?"string":"hash"]:t.map};_.prototype.clear=function(){this.size=0,this.__data__={hash:new we,map:new(ze||f),string:new we}},_.prototype["delete"]=function(e){var n=Te(this,e)["delete"](e);return this.size-=n?1:0,n},_.prototype.get=function(e){return Te(this,e).get(e)},_.prototype.has=function(e){return Te(this,e).has(e)},_.prototype.set=function(e,n){var t=Te(this,e),o=t.size;return t.set(e,n),this.size+=t.size==o?0:1,this};var Ae=_;g.Cache=Ae;var Re=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Fe=/\\(\\)?/g,Ve=function(e){var n=g(e,function(e){return 500===t.size&&t.clear(),e}),t=n.cache;return n}(function(e){var n=[];return 46===e.charCodeAt(0)&&n.push(""),e.replace(Re,function(e,t,o,r){n.push(o?r.replace(Fe,"$1"):t||e)}),n}),Ne=function(e,n){for(var t=-1,o=null==e?0:e.length,r=Array(o);++t<o;)r[t]=n(e[t],t,e);return r},We=1/0,Ce=M?M.prototype:void 0,$e=Ce?Ce.toString:void 0,Me=function(e){return null==e?"":h(e)},Be=function(e,n){return F(e)?e:l(e,n)?[e]:Ve(Me(e))},Ue=function(e){if("string"==typeof e||q(e))return e;var n=e+"";return"0"==n&&1/e==-(1/0)?"-0":n},Ie=function(e,n){n=Be(n,e);for(var t=0,o=n.length;null!=e&&t<o;)e=e[Ue(n[t++])];return t&&t==o?e:void 0},Ge=function(e,n,t){var o=null==e?void 0:Ie(e,n);return o===void 0?t:o},Ke=function(){try{var e=me(Object,"defineProperty");return e({},"",{}),e}catch(n){}}(),He=Ke,Qe=function(e,n,t){"__proto__"==n&&He?He(e,n,{configurable:!0,enumerable:!0,value:t,writable:!0}):e[n]=t},De=Object.prototype,Xe=De.hasOwnProperty,Ye=/^(?:0|[1-9]\d*)$/,Ze=function(e,n,t,o){if(!ne(e))return e;n=Be(n,e);for(var r=-1,s=n.length,i=e;null!=i&&++r<s;){var d=Ue(n[r]),a=t;if(r!=s-1){var l=i[d];a=o?o(l,d,i):void 0,a===void 0&&(a=ne(l)?l:b(n[r+1])?[]:{})}m(i,d,a),i=i[d]}return e},qe=function(e,n,t){return null==e?e:Ze(e,n,t)},Je=0/0,en=/^\s+|\s+$/g,nn=/^[-+]0x[0-9a-f]+$/i,tn=/^0b[01]+$/i,on=/^0o[0-7]+$/i,rn=parseInt,sn=function(e){if("number"==typeof e)return e;if(q(e))return Je;if(ne(e)){var n="function"==typeof e.valueOf?e.valueOf():e;e=ne(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(en,"");var t=tn.test(e);return t||on.test(e)?rn(e.slice(2),t?2:8):nn.test(e)?Je:+e},dn=1/0,an=function(e){if(!e)return 0===e?e:0;if(e=sn(e),e===dn||e===-dn){var n=0>e?-1:1;return 1.7976931348623157e+308*n}return e===e?e:0},ln=function(e){var n=an(e),t=n%1;return n===n?t?n-t:n:0},un=function(e){return"number"==typeof e&&e==ln(e)},cn=C.isFinite,pn=Math.min,fn=function(e){var n=Math[e];return function(e,t){if(e=sn(e),t=null==t?0:pn(ln(t),292),t&&cn(e)){var o=(Me(e)+"e").split("e"),r=n(o[0]+"e"+(+o[1]+t));return o=(Me(r)+"e").split("e"),+(o[0]+"e"+(+o[1]-t))}return n(e)}}("round"),yn=fn;return function(e){function n(){function n(){r(e.open)&&e.open(),l("getFuncs",null)}function l(n){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,o=v(),s=P(),d={token:e.token,_id:s,func:n,input:t};return i.readyState===i.OPEN&&i.send(JSON.stringify(d),function(n){n&&r(e.error)&&e.error(n)}),a.on(s,function(e){o.resolve(e),a.removeAllListeners(s)}),o}function u(e){var n=z(e);if("sys"===Ge(n,"output.sys")&&Ge(n,"output.funcs")){var t=n.output.funcs;d={};for(var r=function(e){var n=t[e];qe(d,n,function(e){return l(n,e)})},s=0;s<t.length;s++)r(s);o.resolve(d)}if(Ge(n,"_id")&&Ge(n,"output")){var u=Ge(n,"_id"),c=Ge(n,"output");a.emit(u,c)}}function c(){r(e.close)&&e.close(),t()}function p(n){r(e.error)&&e.error(n),i.close()}var f={url:null,token:null,open:function(){n()},close:function(){c()},message:function(e){u(e)},error:function(e){p(e)}};e.url||(f.url="ws://localhost:8080"),e.token||(f.token="*");try{i=new s(f)}catch(e){return void t()}if(Ge(i,"error"))return void t()}function t(){setTimeout(function(){r(e.reconn)&&e.reconn(),n()},1e3)}var o=v(),i=null,d={},a=new A;return n(),o}});
//# sourceMappingURL=ws-client.umd.js.map

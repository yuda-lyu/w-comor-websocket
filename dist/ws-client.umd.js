/*!
 * ws-client v1.0.11
 * (c) 2018-2019 yuda-lyu(semisphere)
 * Released under the MIT License.
 */(function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b(require("ws")):"function"==typeof define&&define.amd?define(["ws"],b):(a=a||self,a["ws-client"]=b(a.ws))})(this,function(a){'use strict';function b(a){var b=Object.prototype.toString.call(a);return"[object Function]"===b||"[object AsyncFunction]"===b}function c(c){function d(){b(c.open)&&c.open()}function e(){b(c.close)&&c.close()}function f(a){b(c.message)&&c.message(a)}function g(a){b(c.error)&&c.error(a),h.close()}var h=null;c.url||(c.url="ws://localhost:8080"),c.token||(c.token="*");var i,j="undefined"!=typeof window;i=j?window.WebSocket:a;try{h=new i(c.url+"/?token="+c.token)}catch(a){return null}return j?(h.onopen=d,h.onmessage=function(a){var b=a.data;f(b)},h.onclose=e,h.onerror=g):(h.on("open",d),h.on("message",f),h.on("close",e),h.on("error",g)),h}function d(a){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},d(a)}function e(a){return null==a?void 0===a?"[object Undefined]":"[object Null]":V&&V in Object(a)?R(a):U(a)}function f(a){return null!=a&&"object"==d(a)}function g(a){return"symbol"==d(a)||X(a)&&W(a)=="[object Symbol]"}function h(a,b){if(F(a))return!1;var c=d(a);return!!("number"==c||"symbol"==c||"boolean"==c||null==a||Y(a))||$.test(a)||!Z.test(a)||null!=b&&a in Object(b)}function i(a){var b=d(a);return null!=a&&("object"==b||"function"==b)}function j(a){return!!da&&da in a}function k(a){var b=-1,c=null==a?0:a.length;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function l(a){var b=-1,c=null==a?0:a.length;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function m(a){var b=d(a);return"string"==b||"number"==b||"symbol"==b||"boolean"==b?"__proto__"!==a:null===a}function n(a){var b=-1,c=null==a?0:a.length;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function o(a,b){if("function"!=typeof a||null!=b&&"function"!=typeof b)throw new TypeError("Expected a function");var c=function c(){var d=arguments,e=b?b.apply(this,d):d[0],f=c.cache;if(f.has(e))return f.get(e);var g=a.apply(this,d);return c.cache=f.set(e,g)||f,g};return c.cache=new(o.Cache||Ea),c}function p(a){if("string"==typeof a)return a;if(F(a))return Ia(a,p)+"";if(Y(a))return La?La.call(a):"";var b=a+"";return"0"==b&&1/a==-Ja?"-0":b}function q(a,b,c){var d=a[b];Va.call(a,b)&&ya(d,c)&&(c!==void 0||b in a)||Ta(a,b,c)}function r(a,b){var c=d(a);return b=null==b?9007199254740991:b,!!b&&("number"==c||"symbol"!=c&&Wa.test(a))&&-1<a&&0==a%1&&a<b}function s(){var a,b,c=new Promise(function(){a=arguments[0],b=arguments[1]});return c.resolve=a,c.reject=b,c}function t(a){var b=Object.prototype.toString.call(a);return"[object String]"===b}function u(a){return!!(t(a)&&""!==a)}function w(a){var b=Object.prototype.toString.call(a);return"[object Number]"===b}function x(a){var c=!1;return u(a)?c=!isNaN(+a):w(a)&&(c=!0),c}function y(a){if(!x(a))return 0;var b=fb(a);return b}function z(a){return!!x(a)&&(a=y(a),hb(a))}function A(a){if(!x(a))return 0;a=y(a);var b=lb(a);return"0"===b+""?0:b}function B(a){if(!z(a))return!1;var b=0<A(a);return b}function C(){var a,b=0<arguments.length&&arguments[0]!==void 0?arguments[0]:32,c=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],d=[],e=c.length;if(B(b))for(a=0;a<b;a++)d[a]=c[0|Math.random()*e];else if("rfc4122"===b){d[8]=d[13]=d[18]=d[23]="-",d[14]="4";var f;for(a=0;36>a;a++)d[a]||(f=0|16*Math.random(),d[a]=c[19===a?8|3&f:f])}else return"";var g=d.join("");return g}function D(a){if(!u(a))return{};var b={};try{b=JSON.parse(a)}catch(a){b={}}return b}a=a&&a.hasOwnProperty("default")?a["default"]:a;var E=Array.isArray,F=E,G="undefined"==typeof globalThis?"undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?{}:self:global:window:globalThis,H="object"==d(G)&&G&&G.Object===Object&&G,I="object"==("undefined"==typeof self?"undefined":d(self))&&self&&self.Object===Object&&self,J=H||I||Function("return this")(),K=J,L=K.Symbol,M=L,N=Object.prototype,O=N.hasOwnProperty,P=N.toString,Q=M?M.toStringTag:void 0,R=function(a){var b=O.call(a,Q),c=a[Q];try{a[Q]=void 0;var d=!0}catch(a){}var e=P.call(a);return d&&(b?a[Q]=c:delete a[Q]),e},S=Object.prototype,T=S.toString,U=function(a){return T.call(a)},V=M?M.toStringTag:void 0,W=e,X=f,Y=g,Z=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$=/^\w*$/,_=i,aa=function(a){if(!_(a))return!1;var b=W(a);return b=="[object Function]"||b=="[object GeneratorFunction]"||b=="[object AsyncFunction]"||b=="[object Proxy]"},ba=K["__core-js_shared__"],ca=ba,da=function(){var a=/[^.]+$/.exec(ca&&ca.keys&&ca.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),ea=Function.prototype,fa=ea.toString,ga=function(a){if(null!=a){try{return fa.call(a)}catch(a){}try{return a+""}catch(a){}}return""},ha=/[\\^$.*+?()[\]{}|]/g,ia=/^\[object .+?Constructor\]$/,ja=Function.prototype,ka=Object.prototype,la=ja.toString,ma=ka.hasOwnProperty,na=RegExp("^"+la.call(ma).replace(ha,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),oa=function(a){if(!_(a)||j(a))return!1;var b=aa(a)?na:ia;return b.test(ga(a))},pa=function(a,b){return null==a?void 0:a[b]},qa=function(a,b){var c=pa(a,b);return oa(c)?c:void 0},ra=qa(Object,"create"),sa=ra,ta=Object.prototype,ua=ta.hasOwnProperty,va=Object.prototype,wa=va.hasOwnProperty;k.prototype.clear=function(){this.__data__=sa?sa(null):{},this.size=0},k.prototype["delete"]=function(a){var b=this.has(a)&&delete this.__data__[a];return this.size-=b?1:0,b},k.prototype.get=function(a){var b=this.__data__;if(sa){var c=b[a];return c==="__lodash_hash_undefined__"?void 0:c}return ua.call(b,a)?b[a]:void 0},k.prototype.has=function(a){var b=this.__data__;return sa?b[a]!==void 0:wa.call(b,a)},k.prototype.set=function(a,b){var c=this.__data__;return this.size+=this.has(a)?0:1,c[a]=sa&&void 0===b?"__lodash_hash_undefined__":b,this};var xa=k,ya=function(a,b){return a===b||a!==a&&b!==b},za=function(a,b){for(var c=a.length;c--;)if(ya(a[c][0],b))return c;return-1},Aa=Array.prototype,Ba=Aa.splice;l.prototype.clear=function(){this.__data__=[],this.size=0},l.prototype["delete"]=function(a){var b=this.__data__,c=za(b,a);if(0>c)return!1;var d=b.length-1;return c==d?b.pop():Ba.call(b,c,1),--this.size,!0},l.prototype.get=function(a){var b=this.__data__,c=za(b,a);return 0>c?void 0:b[c][1]},l.prototype.has=function(a){return-1<za(this.__data__,a)},l.prototype.set=function(a,b){var c=this.__data__,d=za(c,a);return 0>d?(++this.size,c.push([a,b])):c[d][1]=b,this};var Ca=qa(K,"Map"),Da=function(a,b){var c=a.__data__;return m(b)?c["string"==typeof b?"string":"hash"]:c.map};n.prototype.clear=function(){this.size=0,this.__data__={hash:new xa,map:new(Ca||l),string:new xa}},n.prototype["delete"]=function(a){var b=Da(this,a)["delete"](a);return this.size-=b?1:0,b},n.prototype.get=function(a){return Da(this,a).get(a)},n.prototype.has=function(a){return Da(this,a).has(a)},n.prototype.set=function(a,b){var c=Da(this,a),d=c.size;return c.set(a,b),this.size+=c.size==d?0:1,this};var Ea=n;o.Cache=Ea;var Fa=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ga=/\\(\\)?/g,Ha=function(a){var b=o(a,function(a){return 500===c.size&&c.clear(),a}),c=b.cache;return b}(function(a){var b=[];return 46===a.charCodeAt(0)&&b.push(""),a.replace(Fa,function(a,c,d,e){b.push(d?e.replace(Ga,"$1"):c||a)}),b}),Ia=function(a,b){for(var c=-1,d=null==a?0:a.length,e=Array(d);++c<d;)e[c]=b(a[c],c,a);return e},Ja=1/0,Ka=M?M.prototype:void 0,La=Ka?Ka.toString:void 0,Ma=function(a){return null==a?"":p(a)},Na=function(a,b){return F(a)?a:h(a,b)?[a]:Ha(Ma(a))},Oa=function(a){if("string"==typeof a||Y(a))return a;var b=a+"";return"0"==b&&1/a==-(1/0)?"-0":b},Pa=function(a,b){b=Na(b,a);for(var c=0,d=b.length;null!=a&&c<d;)a=a[Oa(b[c++])];return c&&c==d?a:void 0},Qa=function(a,b,c){var d=null==a?void 0:Pa(a,b);return d===void 0?c:d},Ra=function(){try{var a=qa(Object,"defineProperty");return a({},"",{}),a}catch(a){}}(),Sa=Ra,Ta=function(a,b,c){"__proto__"==b&&Sa?Sa(a,b,{configurable:!0,enumerable:!0,value:c,writable:!0}):a[b]=c},Ua=Object.prototype,Va=Ua.hasOwnProperty,Wa=/^(?:0|[1-9]\d*)$/,Xa=function(a,b,c,d){if(!_(a))return a;b=Na(b,a);for(var e=-1,f=b.length,g=a;null!=g&&++e<f;){var h=Oa(b[e]),i=c;if(e!=f-1){var j=g[h];i=d?d(j,h,g):void 0,i===void 0&&(i=_(j)?j:r(b[e+1])?[]:{})}q(g,h,i),g=g[h]}return a},Ya=function(a,b,c){return null==a?a:Xa(a,b,c)},Za=0/0,$a=/^\s+|\s+$/g,_a=/^[-+]0x[0-9a-f]+$/i,ab=/^0b[01]+$/i,bb=/^0o[0-7]+$/i,cb=parseInt,db=function(a){if("number"==typeof a)return a;if(Y(a))return Za;if(_(a)){var b="function"==typeof a.valueOf?a.valueOf():a;a=_(b)?b+"":b}if("string"!=typeof a)return 0===a?a:+a;a=a.replace($a,"");var c=ab.test(a);return c||bb.test(a)?cb(a.slice(2),c?2:8):_a.test(a)?Za:+a},eb=1/0,fb=function(a){if(!a)return 0===a?a:0;if(a=db(a),a===eb||a===-eb){var b=0>a?-1:1;return 1.7976931348623157e+308*b}return a===a?a:0},gb=function(a){var b=fb(a),c=b%1;return b===b?c?b-c:b:0},hb=function(a){return"number"==typeof a&&a==gb(a)},ib=K.isFinite,jb=Math.min,kb=function(a){var b=Math[a];return function(a,c){if(a=db(a),c=null==c?0:jb(gb(c),292),c&&ib(a)){var d=(Ma(a)+"e").split("e"),e=b(d[0]+"e"+(+d[1]+c));return d=(Ma(e)+"e").split("e"),+(d[0]+"e"+(+d[1]-c))}return b(a)}}("round"),lb=kb;return function(a){function d(){function d(){b(a.open)&&a.open(),i("getFuncs",null)}function i(c){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,e=s(),f=C(),i={token:a.token,_id:f,func:c,input:d};g[f]=null,h.readyState===h.OPEN&&h.send(JSON.stringify(i),function(c){c&&b(a.error)&&a.error(c)});var j=setInterval(function(){if(null!==g[f]){var a=Qa(g[f],"output");delete g[f],e.resolve(a),clearInterval(j)}},1e3);return e}function k(a){var b=D(a);if("sys"===Qa(b,"output.sys")&&Qa(b,"output.funcs")){var c=b.output.funcs;j={};for(var d=function(a){var b=c[a];Ya(j,b,function(a){return i(b,a)})},e=0;e<c.length;e++)d(e);f.resolve(j)}Qa(b,"_id")&&Qa(b,"output")&&(g[b._id]=b)}function l(){b(a.close)&&a.close(),e()}function m(c){b(a.error)&&a.error(c),h.close()}var n={url:null,token:null,open:function(){d()},close:function(){l()},message:function(a){k(a)},error:function(a){m(a)}};a.url||(n.url="ws://localhost:8080"),a.token||(n.token="*");try{h=new c(n)}catch(a){e()}}function e(){setTimeout(function(){b(a.reconn)&&a.reconn(),d()},1e3)}var f=s(),g={},h=null,j={};return d(),f}});
//# sourceMappingURL=ws-client.umd.js.map

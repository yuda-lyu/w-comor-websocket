/*!
 * ws-client v1.0.13
 * (c) 2018-2019 yuda-lyu(semisphere)
 * Released under the MIT License.
 */(function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("ws")):"function"==typeof define&&define.amd?define(["ws"],t):(e=e||self,e["ws-client"]=t(e.ws))})(this,function(e){'use strict';function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(){return"undefined"==typeof self?"undefined"==typeof window?"undefined"==typeof global?null:global:window:self}function o(){var e="undefined"!=typeof window&&"undefined"!=typeof window.document,n="object"===("undefined"==typeof self?"undefined":t(self))&&self.constructor&&"DedicatedWorkerGlobalScope"===self.constructor.name,o="undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node;e=e||n;var s={isBrowser:e,isWebWorker:n,isNode:o};return s}function r(e){var t=Object.prototype.toString.call(e);return"[object Function]"===t||"[object AsyncFunction]"===t}function s(t){function s(){r(t.open)&&t.open()}function i(){r(t.close)&&t.close()}function d(e){r(t.message)&&t.message(e)}function a(e){r(t.error)&&t.error(e),l.close()}var l=null;t.url||(t.url="ws://localhost:8080"),t.token||(t.token="*");var u,c=o().isBrowser;u=c?n().WebSocket:e;try{l=new u(t.url+"/?token="+t.token)}catch(e){return null}return c?(l.onopen=s,l.onmessage=function(e){var t=e.data;d(t)},l.onclose=i,l.onerror=a):(l.on("open",s),l.on("message",d),l.on("close",i),l.on("error",a)),l}function i(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":X&&X in Object(e)?D(e):q(e)}function d(e){return null!=e&&"object"==t(e)}function a(e){return"symbol"==t(e)||Z(e)&&Y(e)=="[object Symbol]"}function l(e,n){if(R(e))return!1;var o=t(e);return!!("number"==o||"symbol"==o||"boolean"==o||null==e||H(e))||ee.test(e)||!J.test(e)||null!=n&&e in Object(n)}function u(e){var n=t(e);return null!=e&&("object"==n||"function"==n)}function c(e){return!!se&&se in e}function p(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function f(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function y(e){var n=t(e);return"string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==e:null===e}function _(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function g(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function n(){var o=arguments,r=t?t.apply(this,o):o[0],s=n.cache;if(s.has(r))return s.get(r);var i=e.apply(this,o);return n.cache=s.set(r,i)||s,i};return n.cache=new(g.Cache||Ae),n}function h(e){if("string"==typeof e)return e;if(R(e))return Ne(e,h)+"";if(H(e))return $e?$e.call(e):"";var t=e+"";return"0"==t&&1/e==-We?"-0":t}function m(e,t,n){var o=e[t];Xe.call(e,t)&&Se(o,n)&&(n!==void 0||t in e)||Ke(e,t,n)}function b(e,n){var o=t(e);return n=null==n?9007199254740991:n,!!n&&("number"==o||"symbol"!=o&&Ye.test(e))&&-1<e&&0==e%1&&e<n}function v(){var e,t,n=new Promise(function(){e=arguments[0],t=arguments[1]});return n.resolve=e,n.reject=t,n}function k(e){var t=Object.prototype.toString.call(e);return"[object String]"===t}function O(e){return!!(k(e)&&""!==e)}function j(e){var t=Object.prototype.toString.call(e);return"[object Number]"===t}function L(e){var t=!1;return O(e)?t=!isNaN(+e):j(e)&&(t=!0),t}function w(e){if(!L(e))return 0;var t=dt(e);return t}function S(e){return!!L(e)&&(e=w(e),lt(e))}function E(e){if(!L(e))return 0;e=w(e);var t=ft(e);return"0"===t+""?0:t}function x(e){if(!S(e))return!1;var t=0<E(e);return t}function P(){var e,t=0<arguments.length&&arguments[0]!==void 0?arguments[0]:32,n=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],o=[],s=n.length;if(x(t))for(e=0;e<t;e++)o[e]=n[0|Math.random()*s];else if("rfc4122"===t){o[8]=o[13]=o[18]=o[23]="-",o[14]="4";var d;for(e=0;36>e;e++)o[e]||(d=0|16*Math.random(),o[e]=n[19===e?8|3&d:d])}else return"";var a=o.join("");return a}function z(e){if(!O(e))return{};var t={};try{t=JSON.parse(e)}catch(e){t={}}return t}e=e&&e.hasOwnProperty("default")?e["default"]:e;var T="undefined"==typeof globalThis?"undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?{}:self:global:window:globalThis,A=function(e,t){return t={exports:{}},e(t,t.exports),t.exports}(function(e){(function(n){function o(){}function r(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function s(e){return function(){return this[e].apply(this,arguments)}}function i(e){return!!("function"==typeof e||e instanceof RegExp)||!!(e&&"object"===t(e))&&i(e.listener)}var d=o.prototype,a=n.EventEmitter;d.getListeners=function(e){var t,n,o=this._getEvents();if(e instanceof RegExp)for(n in t={},o)o.hasOwnProperty(n)&&e.test(n)&&(t[n]=o[n]);else t=o[e]||(o[e]=[]);return t},d.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},d.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&(t={},t[e]=n),t||n},d.addListener=function(e,n){if(!i(n))throw new TypeError("listener must be a function");var o,s=this.getListenersAsObject(e),d="object"===t(n);for(o in s)s.hasOwnProperty(o)&&-1===r(s[o],n)&&s[o].push(d?n:{listener:n,once:!1});return this},d.on=s("addListener"),d.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},d.once=s("addOnceListener"),d.defineEvent=function(e){return this.getListeners(e),this},d.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},d.removeListener=function(e,t){var n,o,s=this.getListenersAsObject(e);for(o in s)s.hasOwnProperty(o)&&(n=r(s[o],t),-1!==n&&s[o].splice(n,1));return this},d.off=s("removeListener"),d.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},d.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},d.manipulateListeners=function(e,n,o){var r,s,d=e?this.removeListener:this.addListener,a=e?this.removeListeners:this.addListeners;if("object"===t(n)&&!(n instanceof RegExp))for(r in n)n.hasOwnProperty(r)&&(s=n[r])&&("function"==typeof s?d.call(this,r,s):a.call(this,r,s));else for(r=o.length;r--;)d.call(this,n,o[r]);return this},d.removeEvent=function(e){var n,o=t(e),r=this._getEvents();if("string"===o)delete r[e];else if(e instanceof RegExp)for(n in r)r.hasOwnProperty(n)&&e.test(n)&&delete r[n];else delete this._events;return this},d.removeAllListeners=s("removeEvent"),d.emitEvent=function(e,t){var n,o,r,s,d,a=this.getListenersAsObject(e);for(s in a)if(a.hasOwnProperty(s))for(n=a[s].slice(0),r=0;r<n.length;r++)o=n[r],!0===o.once&&this.removeListener(e,o.listener),d=o.listener.apply(this,t||[]),d===this._getOnceReturnValue()&&this.removeListener(e,o.listener);return this},d.trigger=s("emitEvent"),d.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},d.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},d._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},d._getEvents=function(){return this._events||(this._events={})},o.noConflict=function(){return n.EventEmitter=a,o},e.exports?e.exports=o:n.EventEmitter=o})("undefined"==typeof window?T||{}:window)}),F=Array.isArray,R=F,V="object"==t(T)&&T&&T.Object===Object&&T,N="object"==("undefined"==typeof self?"undefined":t(self))&&self&&self.Object===Object&&self,W=V||N||Function("return this")(),C=W,$=C.Symbol,B=$,G=Object.prototype,M=G.hasOwnProperty,U=G.toString,I=B?B.toStringTag:void 0,D=function(e){var t=M.call(e,I),n=e[I];try{e[I]=void 0;var o=!0}catch(t){}var r=U.call(e);return o&&(t?e[I]=n:delete e[I]),r},Q=Object.prototype,K=Q.toString,q=function(e){return K.call(e)},X=B?B.toStringTag:void 0,Y=i,Z=d,H=a,J=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ee=/^\w*$/,te=u,ne=function(e){if(!te(e))return!1;var t=Y(e);return t=="[object Function]"||t=="[object GeneratorFunction]"||t=="[object AsyncFunction]"||t=="[object Proxy]"},oe=C["__core-js_shared__"],re=oe,se=function(){var e=/[^.]+$/.exec(re&&re.keys&&re.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),ie=Function.prototype,de=ie.toString,ae=function(e){if(null!=e){try{return de.call(e)}catch(t){}try{return e+""}catch(t){}}return""},le=/[\\^$.*+?()[\]{}|]/g,ue=/^\[object .+?Constructor\]$/,ce=Function.prototype,pe=Object.prototype,fe=ce.toString,ye=pe.hasOwnProperty,_e=RegExp("^"+fe.call(ye).replace(le,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ge=function(e){if(!te(e)||c(e))return!1;var t=ne(e)?_e:ue;return t.test(ae(e))},he=function(e,t){return null==e?void 0:e[t]},me=function(e,t){var n=he(e,t);return ge(n)?n:void 0},be=me(Object,"create"),ve=be,ke=Object.prototype,Oe=ke.hasOwnProperty,je=Object.prototype,Le=je.hasOwnProperty;p.prototype.clear=function(){this.__data__=ve?ve(null):{},this.size=0},p.prototype["delete"]=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},p.prototype.get=function(e){var t=this.__data__;if(ve){var n=t[e];return n==="__lodash_hash_undefined__"?void 0:n}return Oe.call(t,e)?t[e]:void 0},p.prototype.has=function(e){var t=this.__data__;return ve?t[e]!==void 0:Le.call(t,e)},p.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ve&&void 0===t?"__lodash_hash_undefined__":t,this};var we=p,Se=function(e,t){return e===t||e!==e&&t!==t},Ee=function(e,t){for(var n=e.length;n--;)if(Se(e[n][0],t))return n;return-1},xe=Array.prototype,Pe=xe.splice;f.prototype.clear=function(){this.__data__=[],this.size=0},f.prototype["delete"]=function(e){var t=this.__data__,n=Ee(t,e);if(0>n)return!1;var o=t.length-1;return n==o?t.pop():Pe.call(t,n,1),--this.size,!0},f.prototype.get=function(e){var t=this.__data__,n=Ee(t,e);return 0>n?void 0:t[n][1]},f.prototype.has=function(e){return-1<Ee(this.__data__,e)},f.prototype.set=function(e,t){var n=this.__data__,o=Ee(n,e);return 0>o?(++this.size,n.push([e,t])):n[o][1]=t,this};var ze=me(C,"Map"),Te=function(e,t){var n=e.__data__;return y(t)?n["string"==typeof t?"string":"hash"]:n.map};_.prototype.clear=function(){this.size=0,this.__data__={hash:new we,map:new(ze||f),string:new we}},_.prototype["delete"]=function(e){var t=Te(this,e)["delete"](e);return this.size-=t?1:0,t},_.prototype.get=function(e){return Te(this,e).get(e)},_.prototype.has=function(e){return Te(this,e).has(e)},_.prototype.set=function(e,t){var n=Te(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this};var Ae=_;g.Cache=Ae;var Fe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Re=/\\(\\)?/g,Ve=function(e){var t=g(e,function(e){return 500===n.size&&n.clear(),e}),n=t.cache;return t}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Fe,function(e,n,o,r){t.push(o?r.replace(Re,"$1"):n||e)}),t}),Ne=function(e,t){for(var n=-1,o=null==e?0:e.length,r=Array(o);++n<o;)r[n]=t(e[n],n,e);return r},We=1/0,Ce=B?B.prototype:void 0,$e=Ce?Ce.toString:void 0,Be=function(e){return null==e?"":h(e)},Ge=function(e,t){return R(e)?e:l(e,t)?[e]:Ve(Be(e))},Me=function(e){if("string"==typeof e||H(e))return e;var t=e+"";return"0"==t&&1/e==-(1/0)?"-0":t},Ue=function(e,t){t=Ge(t,e);for(var n=0,o=t.length;null!=e&&n<o;)e=e[Me(t[n++])];return n&&n==o?e:void 0},Ie=function(e,t,n){var o=null==e?void 0:Ue(e,t);return o===void 0?n:o},De=function(){try{var e=me(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),Qe=De,Ke=function(e,t,n){"__proto__"==t&&Qe?Qe(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},qe=Object.prototype,Xe=qe.hasOwnProperty,Ye=/^(?:0|[1-9]\d*)$/,Ze=function(e,t,n,o){if(!te(e))return e;t=Ge(t,e);for(var r=-1,s=t.length,i=e;null!=i&&++r<s;){var d=Me(t[r]),a=n;if(r!=s-1){var l=i[d];a=o?o(l,d,i):void 0,a===void 0&&(a=te(l)?l:b(t[r+1])?[]:{})}m(i,d,a),i=i[d]}return e},He=function(e,t,n){return null==e?e:Ze(e,t,n)},Je=0/0,et=/^\s+|\s+$/g,tt=/^[-+]0x[0-9a-f]+$/i,nt=/^0b[01]+$/i,ot=/^0o[0-7]+$/i,rt=parseInt,st=function(e){if("number"==typeof e)return e;if(H(e))return Je;if(te(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=te(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(et,"");var n=nt.test(e);return n||ot.test(e)?rt(e.slice(2),n?2:8):tt.test(e)?Je:+e},it=1/0,dt=function(e){if(!e)return 0===e?e:0;if(e=st(e),e===it||e===-it){var t=0>e?-1:1;return 1.7976931348623157e+308*t}return e===e?e:0},at=function(e){var t=dt(e),n=t%1;return t===t?n?t-n:t:0},lt=function(e){return"number"==typeof e&&e==at(e)},ut=C.isFinite,ct=Math.min,pt=function(e){var t=Math[e];return function(e,n){if(e=st(e),n=null==n?0:ct(at(n),292),n&&ut(e)){var o=(Be(e)+"e").split("e"),r=t(o[0]+"e"+(+o[1]+n));return o=(Be(r)+"e").split("e"),+(o[0]+"e"+(+o[1]-n))}return t(e)}}("round"),ft=pt;return function(e){function t(){function t(){r(e.open)&&e.open(),l("getFuncs",null)}function l(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,o=v(),s=P(),d={token:e.token,_id:s,func:t,input:n};return i.readyState===i.OPEN&&i.send(JSON.stringify(d),function(t){t&&r(e.error)&&e.error(t)}),a.on(s,function(e){o.resolve(e),a.removeAllListeners(s)}),o}function u(e){var t=z(e);if("sys"===Ie(t,"output.sys")&&Ie(t,"output.funcs")){var n=t.output.funcs;d={};for(var r=function(e){var t=n[e];He(d,t,function(e){return l(t,e)})},s=0;s<n.length;s++)r(s);o.resolve(d)}if(Ie(t,"_id")&&Ie(t,"output")){var u=Ie(t,"_id"),c=Ie(t,"output");a.emit(u,c)}}function c(){r(e.close)&&e.close(),n()}function p(t){r(e.error)&&e.error(t),i.close()}var f={url:null,token:null,open:function(){t()},close:function(){c()},message:function(e){u(e)},error:function(e){p(e)}};e.url||(f.url="ws://localhost:8080"),e.token||(f.token="*");try{i=new s(f)}catch(e){n()}}function n(){setTimeout(function(){r(e.reconn)&&e.reconn(),t()},1e3)}var o=v(),i=null,d={},a=new A;return t(),o}});
//# sourceMappingURL=ws-client.umd.js.map
